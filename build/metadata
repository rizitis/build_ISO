#!/bin/sh
# shellcheck disable=SC1090
[ "$#" -ne 1 ] && distribution=slint
[ ! "$distribution" ] && distribution="$1"
if [ ! "$distribution" = salix ] && [ ! "$distribution" = slackware ] && [ ! "$distribution" = slint ]; then
	echo "$distribution is not a supported distribution"
	exit
fi
# . ../build/set_variables_"$distribution"
CWD=$(pwd)
[ "$(id -u)" -eq 0 ] && echo "Run this script as regular user." && exit
# Write the metadata
printf "%b" "Write the metadata. This takes a while...\n"
( cd "$ISODIR" || exit
sh "$ROOTDIR"/build/metagen.sh all
sh "$ROOTDIR"/build/metagen.sh clean
sh "$ROOTDIR"/build/metagen.sh md5
)
wget -q -P "$ISODIR" "http://$SLINTREMOTE/GPG-KEY"
echo Metadata have been written.
